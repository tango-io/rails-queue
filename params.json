{"name":"Rails-queue","tagline":"Rails.queue (from Rails 4) backported to Rails 3.2+","google":"","body":"# rails-queue\r\n\r\n[![Build Status](https://secure.travis-ci.org/probablywrong/rails-queue.png)](https://travis-ci.org/probablywrong/rails-queue)\r\n\r\n## Description\r\n\r\nIt's the `Rails.queue` [from Rails 4](https://github.com/rails/rails/blob/master/activesupport/lib/active_support/queueing.rb), backported to Rails 3.2+ for your Queueing pleasure.\r\n\r\n> `Rails.queue` is the application's queue. You can push a job onto the queue by:\r\n>\r\n> ```\r\n> Rails.queue.push job\r\n> ```\r\n>\r\n> A job is an object that responds to `#run`. Queue consumers will pop jobs off of the queue and invoke the queue's `run` method.\r\n>\r\n> Note that depending on your queue implementation, jobs may not be executed in the same process as they were created in, and are never executed in the same thread as they were created in.\r\n>\r\n> If necessary, a queue implementation may need to serialize your job for distribution to another process. The documentation of your queue will specify the requirements for that serialization\r\n\r\n\r\n## Requirements\r\n\r\nThis gem requires Rails 3.2+ and has been tested on the following versions:\r\n\r\n* 3.2.8\r\n* 3.2.9\r\n\r\nThis gem has been tested against the following Ruby versions:\r\n\r\n* 1.9.2\r\n* 1.9.3\r\n\r\n\r\n## Installation\r\n\r\nAdd this line to your application's Gemfile:\r\n\r\n```ruby\r\ngem \"rails-queue\"\r\n```\r\n\r\nAnd then execute:\r\n\r\n```\r\n$ bundle\r\n```\r\n\r\nOr install it yourself as:\r\n\r\n```\r\n$ gem install rails-queue\r\n```\r\n\r\n\r\n## Usage\r\n\r\nThe following queueing strategies are provided by default:\r\n\r\n* `SynchronousQueue`\r\n* `TestQueue`\r\n\r\nThe following queue consumer strategies are provided by default:\r\n\r\n* `ThreadedQueueConsumer`\r\n\r\nThe threaded consumer will run jobs in a background thread in development mode or in a VM where running jobs on a thread in production mode makes sense.\r\n\r\nWhen the process exits, the consumer pushes a `nil` onto the queue and joins the thread, which will ensure that all jobs are executed before the process finally dies.\r\n\r\n_Note: In this port, classes that live under the `ActiveSupport::` namespace in Rails 4 have been moved to the `Rails::Queue::` namespace._\r\n\r\n### Configuration\r\n\r\nRails will now have the following options available:\r\n\r\n* `config.queue`\r\n* `config.queue_consumer`\r\n* `config.action_mailer.queue`\r\n\r\nThese can be customized in `config/application.rb` or by environment:\r\n\r\n```ruby\r\n# config/environments/production.rb\r\n\r\n# Default the production mode queue to an synchronous queue. You will probably\r\n# want to replace this with an out-of-process queueing solution.\r\nconfig.queue = Rails::Queue::SynchronousQueue.new\r\n\r\n# You will probably want to change the job queue consumer from the default.\r\nconfig.queue_consumer = Rails::Queue::ThreadedQueueConsumer.new\r\n```\r\n\r\n\r\n### ActionMailer\r\n\r\nMail delivery from ActionMailer can be processed asynchronously using the Rails.queue.\r\n\r\nBy default, ActionMailer will use the application default Rails.queue strategy. This can be configured:\r\n\r\n```ruby\r\n# The queue that will be used to deliver the mail. The queue should expect a job\r\n# that responds to run.\r\nconfig.action_mailer.queue = Rails::Queue::SynchronousQueue.new\r\n```\r\n\r\n\r\n### Testing\r\n\r\nIn test mode, the Rails queue is backed by an Array so that assertions can be made about its contents. The test queue provides a `jobs` method to make assertions about the queue's contents and a `drain` method to drain the queue and run the jobs.\r\n\r\nJobs are run in a separate thread to catch mistakes where code assumes that the job is run in the same thread.\r\n\r\n```ruby\r\n# config/environments/test.rb\r\n\r\nconfig.queue = Rails::Queue::TestQueue.new\r\n```\r\n\r\n### Alternate Providers\r\n\r\nThe Rails Queue implementation is designed to be pluggable and you may want to investigate other queue providers, such as:\r\n\r\n* [resque-rails](https://github.com/jeremy/resque-rails)\r\n* [Sidekiq](https://github.com/mperham/sidekiq/tree/rails4)\r\n\r\n\r\n## Resources\r\n\r\nThe following are some resources from around the Internet which introduce the Rails Queue:\r\n\r\n_Note: Many of these are, or will be soon, out of date._\r\n\r\n* [Ruby on Rails 4.0 Release Notes](http://edgeguides.rubyonrails.org/4_0_release_notes.html)\r\n* [Rails 4.0 Sneak Peek: Queueing](http://reefpoints.dockyard.com/ruby/2012/06/25/rails-4-sneak-peek-queueing.html)\r\n* [New in Rails 4.0: Rails Queue](http://www.3magine.com/blog/new-in-rails-4-0-rails-queue/)\r\n\r\n\r\n## A note on spelling\r\n\r\nYes, there are two spelling options. We defer to research provided by [XKCD](http://xkcd.com/853/).\r\n\r\n\r\n## Authors\r\n\r\nThis was written/extracted as part of an ongoing yak-shave known as \"We're Probably Wrong\", a production of:\r\n\r\n* [@elskwid](https://github.com/elskwid) [![endorse](http://api.coderwall.com/elskwid/endorsecount.png)](http://coderwall.com/elskwid)\r\n* [@phlipper](https://github.com/phlipper) [![endorse](http://api.coderwall.com/phlipper/endorsecount.png)](http://coderwall.com/phlipper)\r\n\r\n\r\n## Contributors\r\n\r\nMany thanks go to the following who have contributed to making this gem even better:\r\n\r\n* **[@rails](https://github.com/rails)**\r\n    * for making this all possible in the first place\r\n\r\n\r\n## Contributing\r\n\r\n1. [Fork it](https://github.com/phlipper/rails-four-queueing/fork_select)\r\n2. Create your feature branch (`git checkout -b my-new-feature`)\r\n3. Commit your changes (`git commit -am 'Added some feature'`)\r\n4. Push to the branch (`git push origin my-new-feature`)\r\n5. [Create a Pull Request](hhttps://github.com/phlipper/rails-four-queueing/pull/new)\r\n\r\n\r\n## License\r\n\r\n**rails-queue**\r\n\r\n* Freely distributable and licensed under the [MIT license](http://probablywrong.mit-license.org/2012/license.html).\r\n* Copyright (c) 2012 We're Probably Wrong (github@wereprobablywrong.com)\r\n* http://wereprobablywrong.com/\r\n\r\n**rails**\r\n\r\n* Ruby on Rails is released under the [MIT License](http://www.opensource.org/licenses/MIT).\r\n","note":"Don't delete this file! It's used internally to help with page regeneration."}